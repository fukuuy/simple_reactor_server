# Reactor模式服务器框架

这是一个基于Reactor模式的高性能网络服务器框架，采用了IO多路复用(epoll)和线程池技术，支持高并发网络连接处理。

## 项目结构

```
.
├── Handler.h/.cpp      // 事件处理函数实现
├── Event.h/.cpp        // 事件对象定义
├── Reactor.h/.cpp      // Reactor核心逻辑
├── ThreadPool.h/.cpp   // 线程池实现
├── TaskQueue.h/.cpp    // 任务队列实现
├── Server.h/.cpp       // 服务器封装
└── main.cpp            // 程序入口
```

## 核心组件说明

1. **Reactor**：核心事件循环组件，基于epoll实现IO多路复用，负责事件的注册、删除、修改和分发

2. **Event**：事件对象封装，包含文件描述符、事件类型、回调函数等信息

3. **ThreadPool**：线程池组件，负责管理工作线程，处理具体的IO任务，实现任务的异步处理

4. **Handler**：提供具体的事件处理函数，包括连接建立(handleAccept)、数据接收(handleRecv)和数据发送(handleSend)

5. **Server**：服务器监听封装，负责创建监听套接字、绑定地址和端口、启动监听


## 特点

- 采用Reactor模式，基于epoll实现高效的IO多路复用
- 使用线程池处理具体IO任务，避免频繁创建销毁线程的开销
- 边缘触发(EPOLLET)模式，提高IO处理效率
- 非阻塞IO操作，防止线程阻塞
- 支持动态调整线程数量，根据任务量自动扩缩容
- 支持高并发连接处理

## 使用方法

1. 编译项目（需支持C++11及以上标准）：
   ```bash
   g++ -std=c++11 *.cpp -o reactor_server -lpthread
   ```

2. 运行服务器：
   ```bash
   ./reactor_server
   ```

3. 默认监听地址为`192.168.80.128:10000`，可在main.cpp中修改

## 自定义扩展

- 可通过修改Handler中的处理函数，自定义业务逻辑
- 可调整ThreadPool的最小/最大线程数，适应不同的并发场景
- 可扩展Event类，增加更多事件属性和处理方法

## 注意事项

- 本项目仅为基础框架，实际生产环境中需增加日志、信号处理、错误恢复等功能
- 需根据实际需求调整线程池参数和epoll相关配置
- 大文件传输场景下可能需要优化缓冲区大小和处理逻辑
